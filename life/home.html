<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EiJiYuhZ的小站</title>
    <link rel="icon" type="image/x-icon" href="../assets/icon.png">
    <link rel="stylesheet" type="text/css" href="../public/template.css">
    <link rel="stylesheet" type="text/css" href="./assets/home.css">
</head>
<body>
    <div class="navigation web-font" id="navigationMain">
        <div class="navigation-logo" id="navLogo"></div>
        <div class="navigation-search" id="navSearchBox"><input id="navSearch" type="text" placeholder="Search...↘Enter"></div>
        <div id="menu">☰</div>
        <div class="navigation-icon" id="navIcon"></div>
        <ul class="navigation-list" id="navigationList">
            <li class="list-bar"><a class="list-bar-a" href="../others/home.html">ELSE/其它</a></li>
            <li class="list-bar" id="navLife">
                <a class="list-bar-a" href="#" style="color: green;">LIFE/生活</a>
                <div class="life-list">
                    <a class="life-list-bar" href="./hobby/page.html">兴趣</a>
                    <a class="life-list-bar" href="./blog/page.html">日常</a>
                    <a class="life-list-bar" href="./share/page.html">分享</a>
                </div>
            </li>
            <li class="list-bar" id="navWork">
                <a class="list-bar-a" href="../computer/home.html">WORK/工坊</a>
                <div class="work-list">
                    <a class="work-list-bar" href="../computer/projects/page.html">项目</a>
                    <a class="work-list-bar" href="../computer/codes/page.html">技术</a>
                    <a class="work-list-bar" href="../computer/tools/page.html">工具</a>
                </div>
            </li>
            <li class="list-bar"><a class="list-bar-a" href="../index.html">HOME/首页</a></li>
        </ul>
        <div id="optionsList">
            <abbr title="返回顶部"><div id="optionsListBar1">▲</div></abbr>
            <abbr title="关于本站"><div id="optionsListBar2">Z</div></abbr>
            <div class="optionmask"></div>
        </div>
        <div id="options">※</div>
    </div>
    <div class="web-content"> <!-- 此处定制页面内容 -->
        <div class="life-top-card">
            <div class="top-card-img">
                <div class="card-img" id="cardImg"></div>
                <div id="imgAuthor1">By 米山舞よねやままい</div>
            </div>
            <div class="top-card-content">
                <div class="card-title-container">
                    <div class="card-titles" id="toShare">分享</div>
                    <div class="card-titles" id="toHobby">兴趣</div>
                    <div class="card-titles" id="toBlog">日常</div>
                </div>
            </div>
        </div>
        <div class="life-bottom-card">
            <div class="left-card">
                <img id="scrollBox" src="./assets/home_card2.png"></img>
                <img id="mobileBox" src="./assets/home_card2.png"></img>
                <div id="dialogs"><span class="dialog-ani" id="dialog">「 嗨，想我了吗♪ 」</span></div>
                <div id="clock">00 : 00</div>
                <div id="more">
                    
                </div>
            </div>
            <div class="right-card">
                
            </div>
        </div>
    </div>
</body>
<script src="../public/template.js"></script>
<script src="../lib/jquery-3.7.1.min.js"></script>
<script>
    const weatherURL = "https://www.tianqiapi.com/api?version=v6&appid=21375891&appsecret=fTYv7v5E&city=杭州";
    var card_theme = 0; // 0: share  1: hobby  2: blog
    var interval_is_on = true;
    var dialog_idx = 0; // max: 3
    const dialog_list = ["「 嗨，想我了吗♪ 」", "新的一天从一场美妙的邂逅开始♪", "这束鲜花，要心怀感激地收下哦♪", "可爱的少女心是无所不能的哦♥"];
    document.getElementById("toShare").style.color = "white";
    document.getElementById("toShare").style.backgroundColor = "rgb(161, 227, 161)";

    $.get(weatherURL, function(data) { // 请求天气数据
        console.log(data);
    }).fail(function() { // 请求失败
        raiseAlert("ERROR: 天气请求失败!", 3000);
    });

    var changeCard = setInterval(() => {
        if(card_theme == 0) {
            changeTheme(1);
            card_theme = 1;
        }
        else if(card_theme == 1) {
            changeTheme(2);
            card_theme = 2;
        }
        else if(card_theme == 2) {
            changeTheme(0);
            card_theme = 0;
        }
    }, 5200);

    let date = new Date();
    let hours = date.getHours();
    let min = date.getMinutes();
    document.getElementById("clock").innerHTML = hours + " : " + min;
    setInterval(() => {
        let date = new Date();
        let hours = date.getHours();
        let min = date.getMinutes();
        document.getElementById("clock").innerHTML = hours + " : " + min;
    }, 60000);

    function changeDialog() {
        dialog_idx += 1;
        if(dialog_idx > 3) dialog_idx = 0;
        document.getElementById("dialog").innerHTML = dialog_list[dialog_idx];
    }

    function changeTheme(target) { // 0: share  1: hobby  2: blog
        var dir = 'top';
        if(window.innerWidth >= 870) // 如果大屏模式
            dir = 'left';
        if(target == 1) { // to hobby
            document.getElementById("cardImg").style.background = "linear-gradient(to " + dir + ", rgba(255, 255, 255, 1), rgba(255, 255, 255, 0)), url(./assets/home_card4.jpg) no-repeat";
            document.getElementById("cardImg").style.backgroundSize = "cover";
            document.getElementById("imgAuthor1").innerHTML = "By miHoYo";
            resetTitleStyle();
            document.getElementById("toHobby").style.color = "white";
            document.getElementById("toHobby").style.backgroundColor = "rgb(161, 227, 161)";
        }
        else if(target == 2){ // to blog
            document.getElementById("cardImg").style.background = "linear-gradient(to " + dir + ", rgba(255, 255, 255, 1), rgba(255, 255, 255, 0)), url(./assets/home_card3.jpg) no-repeat";
            document.getElementById("cardImg").style.backgroundSize = "cover";
            document.getElementById("imgAuthor1").innerHTML = "原创拍摄";
            resetTitleStyle();
            document.getElementById("toBlog").style.color = "white";
            document.getElementById("toBlog").style.backgroundColor = "rgb(161, 227, 161)";
        }
        else if(target == 0){ // to share
            document.getElementById("cardImg").style.background = "linear-gradient(to " + dir + ", rgba(255, 255, 255, 1), rgba(255, 255, 255, 0)), url(./assets/home_card1.jpg) no-repeat";
            document.getElementById("cardImg").style.backgroundSize = "cover";
            document.getElementById("imgAuthor1").innerHTML = "By 米山舞よねやままい";
            resetTitleStyle();
            document.getElementById("toShare").style.color = "white";
            document.getElementById("toShare").style.backgroundColor = "rgb(161, 227, 161)";
        }
    }

    function resetTitleStyle() {
        document.getElementById("toShare").style.color = "rgb(47, 47, 47)";
        document.getElementById("toHobby").style.color = "rgb(47, 47, 47)";
        document.getElementById("toBlog").style.color = "rgb(47, 47, 47)";
        document.getElementById("toShare").style.backgroundColor = "#e9e9e9";
        document.getElementById("toHobby").style.backgroundColor = "#e9e9e9";
        document.getElementById("toBlog").style.backgroundColor = "#e9e9e9";
    }

    document.getElementById("cardImg").addEventListener('click', function() {
        document.getElementById("imgAuthor1").style.opacity = "1";
        setTimeout(function() {
            document.getElementById("imgAuthor1").style.opacity = "0";
        }, 1400);
    });

    document.getElementById("scrollBox").addEventListener('click', function() { changeDialog(); });
    document.getElementById("mobileBox").addEventListener('click', function() {
        document.getElementById("mobileBox").style.transform = "translateX(-100%)";
        changeDialog();
        setTimeout(function() {
            document.getElementById("mobileBox").style.transform = "translateX(0)";
        }, 2000);
    });

    document.getElementById("toBlog").addEventListener('click', function(){
        if(interval_is_on) {
            clearInterval(changeCard); // 清除定时器
            interval_is_on = false;
        }
        resetTitleStyle();
        document.getElementById("toBlog").style.color = "white";
        document.getElementById("toBlog").style.backgroundColor = "rgb(161, 227, 161)";
        changeTheme(2);
        card_theme = 2;
    });

    document.getElementById("toHobby").addEventListener('click', function(){
        if(interval_is_on) {
            clearInterval(changeCard);
            interval_is_on = false;
        }
        resetTitleStyle();
        document.getElementById("toHobby").style.color = "white";
        document.getElementById("toHobby").style.backgroundColor = "rgb(161, 227, 161)";
        changeTheme(1);
        card_theme = 1;
    });

    document.getElementById("toShare").addEventListener('click', function(){
        if(interval_is_on) {
            clearInterval(changeCard);
            interval_is_on = false;
        }
        resetTitleStyle();
        document.getElementById("toShare").style.color = "white";
        document.getElementById("toShare").style.backgroundColor = "rgb(161, 227, 161)";
        changeTheme(0);
        card_theme = 0;
    });

    document.addEventListener('mousemove', function(event) {
        var scroll_box = document.getElementById("scrollBox");
        var mouseX = event.clientX;
        var imgW = scroll_box.offsetWidth;
        var winW = window.innerWidth;
        if(mouseX <= winW * 0.6 && mouseX >= 0)
            scroll_box.style.transform = "translateX(-"+ myMap(mouseX, 0, winW * 0.6, 0, imgW) +"px)";
    });
</script>
</html>